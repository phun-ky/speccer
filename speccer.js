!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).speccer={})}(this,(function(t){"use strict";!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();const e=(t,e,n)=>{n=n||window;var i=!1,o=function(){i||(i=!0,requestAnimationFrame((function(){n.dispatchEvent(new CustomEvent(e)),i=!1})))};n.removeEventListener(t,o),n.addEventListener(t,o)},n=(t,e)=>{window.requestAnimationFrame((()=>{Object.assign(t.style,e)}))},i=t=>parseInt(t,10),o=t=>{const e=parseFloat(t);return e>=0&&e<1||e<=0&&e>-1?0:e},a=t=>window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,s=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"],d=[{type:"button-center"},{type:"button-outline"},{type:"button-icon"}],p=["TR","TH","TD","TBODY","THEAD","TFOOT"],l=(t="",e,n="span")=>{const i=document.createDocumentFragment(),o=document.createElement(n),a=document.createTextNode(t);(o.classList.add("dissection"),-1===e.indexOf("full")&&-1===e.indexOf("enclose")?o.appendChild(a):-1===e.indexOf("full")&&-1===e.indexOf("enclose")||o.setAttribute("data-dissection-counter",t),e)&&(-1!==e.indexOf(" ")?e.split(" ").forEach((t=>{o.classList.add(t)})):o.classList.add(e));return i.appendChild(o),i},f=(t,e)=>{const i=t.getBoundingClientRect();if(t.getAttribute("data-anatomy")){const i=t.getAttribute("data-anatomy"),o=l(s[e],i),a=t.getBoundingClientRect();let d=0,f=0;const r=p.indexOf(t.nodeName)>=0;if(r){const e=t.closest("table"),n=window.getComputedStyle(e.parentElement);e.after(o),d=e.getBoundingClientRect().top-parseInt(n.getPropertyValue("padding-top"),10),f=e.getBoundingClientRect().left-parseInt(n.getPropertyValue("padding-left"),10)}else t.after(o);const c=o.getBoundingClientRect();let h=(r?a.left-f:t.offsetLeft)-c.width-48+"px",g=(r?a.top-d:t.offsetTop)+a.height/2-c.height/2+"px",x=(r?a.left-f:t.offsetLeft)+a.width+48+"px",m=(r?a.top-d:t.offsetTop)+a.height/2-c.height/2+"px",u=(r?a.left-f:t.offsetLeft)+a.width/2-c.width/2+"px",y=(r?a.top-d:t.offsetTop)-c.height-48+"px",w=(r?a.left-f:t.offsetLeft)+a.width/2-c.width/2+"px",L=(r?a.top-d:t.offsetTop)+a.height+48+"px";-1!==i.indexOf("outline")?-1!==i.indexOf("left")?-1!==i.indexOf("full")?n(o,{left:t.offsetLeft-8+"px",top:t.offsetTop+-1+"px",height:a.height+"px"}):-1!==i.indexOf("enclose")?n(o,{left:t.offsetLeft-1+"px",top:t.offsetTop+-1+"px",height:a.height+"px",width:a.width+"px"}):n(o,{left:h,top:g}):-1!==i.indexOf("right")?-1!==i.indexOf("full")?n(o,{left:t.offsetLeft+a.width+"px",top:t.offsetTop+-1+"px",height:a.height+"px"}):-1!==i.indexOf("enclose")?n(o,{left:t.offsetLeft+-1+"px",top:t.offsetTop+-1+"px",height:a.height+"px",width:a.width+"px"}):n(o,{left:x,top:m}):-1!==i.indexOf("top")?-1!==i.indexOf("full")?n(o,{bottom:t.offsetTop+a.height+"px",left:t.offsetLeft+-1+"px",width:a.width+"px"}):-1!==i.indexOf("enclose")?n(o,{top:t.offsetTop+-1+"px",left:t.offsetLeft+-1+"px",height:a.height+"px",width:a.width+"px"}):n(o,{left:u,top:y}):-1!==i.indexOf("bottom")?-1!==i.indexOf("full")?n(o,{top:t.offsetTop+a.height+"px",left:t.offsetLeft+-1+"px",width:a.width+"px"}):-1!==i.indexOf("enclose")?n(o,{top:t.offsetTop+-1+"px",left:t.offsetLeft+-1+"px",height:a.height+"px",width:a.width+"px"}):n(o,{left:w,top:L}):-1!==i.indexOf("full")?n(o,{left:t.offsetLeft+a.width+"px",top:t.offsetTop+"px",height:a.height+"px"}):-1!==i.indexOf("enclose")?n(o,{left:t.offsetLeft+a.width+"px",top:t.offsetTop+-1+"px",height:a.height+"px",width:a.width+"px"}):n(o,{left:h,top:g}):-1!==i.indexOf("full")?n(o,{left:t.offsetLeft-8+"px",top:t.offsetTop+-1+"px",height:a.height+"px"}):-1!==i.indexOf("enclose")?n(o,{left:t.offsetLeft-1+"px",top:t.offsetTop+-1+"px",height:a.height+"px",width:a.width+"px"}):n(o,{left:h,top:g})}else d.forEach(((e,o)=>{const a=l(s[o],e.type);p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a);const d=a.getBoundingClientRect();"button-center"==e.type?n(a,{left:t.offsetLeft+i.width/2-d.width/2+"px",top:t.offsetTop-d.height-48+i.height/2+"px"}):"button-outline"==e.type?n(a,{left:t.offsetLeft+i.width+48+"px",top:t.offsetTop+i.height/2-d.height/2+"px"}):"button-icon"==e.type&&n(a,{left:t.offsetLeft-d.width-48+18+"px",top:t.offsetTop+i.height/2-d.height/2+"px"})}))},r=()=>{console.info("[@phun-ky/speccer]: Running anatomy()"),w(".dissection"),document.querySelectorAll("[data-anatomy-section]").forEach((t=>{t.querySelectorAll("[data-anatomy]").forEach(f)}))},c=(t="",e="span")=>{const n=document.createDocumentFragment(),i=document.createElement(e),o=document.createTextNode(t);return i.appendChild(o),i.setAttribute("title",t+"px"),i.classList.add("speccer"),n.appendChild(i),n},h=(t="",e="",n="span")=>{const i=document.createDocumentFragment(),o=document.createElement(n);(o.setAttribute("title",t+"px"),o.setAttribute("data-measure",parseInt(t,10)+"px"),o.classList.add("speccer"),o.classList.add("measure"),""!==e)&&(-1!==e.indexOf(" ")?e.split(" ").forEach((t=>{o.classList.add(t)})):o.classList.add(e));return i.appendChild(o),i},g=t=>{const e=t.getBoundingClientRect(),i=t.getAttribute("data-speccer-measure");if(""!==i)if(-1!==i.indexOf("width"))if(-1!==i.indexOf("bottom")){const i=h(e.width,"width bottom");p.indexOf(t.nodeName)>=0?t.closest("table").after(i):t.after(i),n(i,{left:t.offsetLeft+"px",top:t.offsetTop+e.height+1+"px",width:e.width+"px"})}else{const i=h(e.width,"width top");p.indexOf(t.nodeName)>=0?t.closest("table").after(i):t.after(i);const o=i.getBoundingClientRect();n(i,{left:t.offsetLeft+"px",top:t.offsetTop-o.height+1+"px",width:e.width+"px"})}else if(-1!==i.indexOf("height"))if(-1!==i.indexOf("right")){const i=h(e.height,"height right");p.indexOf(t.nodeName)>=0?t.closest("table").after(i):t.after(i),n(i,{left:t.offsetLeft+e.width+"px",top:t.offsetTop+"px",height:e.height+"px"})}else{const i=h(e.height,"height top");p.indexOf(t.nodeName)>=0?t.closest("table").after(i):t.after(i);const o=i.getBoundingClientRect();n(i,{left:t.offsetLeft-o.width+"px",top:t.offsetTop+"px",height:e.height+"px"})}},x=t=>{const e=t.getAttribute("data-speccer-typography"),i=a(t);if("none"===i.display||"hidden"===i.visibility)return;t.classList.add("speccer-isSpecced");"static"===a(t.parentElement).position&&(t.parentElement.style.position="relative");const o=(t=>{const{lineHeight:e,letterSpacing:n,fontFamily:i,fontSize:o,fontStyle:a,fontVariationSettings:s,fontWeight:d}=t;return{lineHeight:e,letterSpacing:n,fontFamily:i,fontSize:o,fontStyle:a,fontVariationSettings:s,fontWeight:d}})(i),s=t.getBoundingClientRect(),d=((t,e)=>{const n=document.createDocumentFragment(),i=document.createElement("div");return i.innerHTML=t,i.classList.add("speccer"),i.classList.add("typography"),""!==e&&(-1!==e.indexOf(" ")?e.split(" ").forEach((t=>{i.classList.add(t)})):i.classList.add(e)),n.appendChild(i),n})(`\n    font-styles: {<ul class="speccer-styles">  <li><span class="property">font-family:</span> ${o.fontFamily};</li>  <li><span class="property">font-size:</span> ${o.fontSize} / ${parseInt(o.fontSize,10)/16}rem;</li>  <li><span class="property">font-weight:</span> ${o.fontWeight};</li>  <li><span class="property">font-variation-settings:</span> ${o.fontVariationSettings};</li>  <li><span class="property">line-height:</span> ${o.lineHeight} / ${parseInt(o.lineHeight,10)/16}rem;</li>  <li><span class="property">letter-spacing:</span> ${o.letterSpacing};</li>  <li><span class="property">font-style:</span> ${o.fontStyle};</li></ul>}`,e);let l=0,f=0;const r=p.indexOf(t.nodeName)>=0;if(r){const e=t.parentElement,n=window.getComputedStyle(e.parentElement);e.after(d),l=e.getBoundingClientRect().top-parseInt(n.getPropertyValue("padding-top"),10),f=e.getBoundingClientRect().left-parseInt(n.getPropertyValue("padding-left"),10)}else t.after(d);const c=d.getBoundingClientRect();let h=(r?c.left-f:t.offsetLeft)-c.width-48+"px",g=parseFloat((r?c.top-l:t.offsetTop)-c.height/2+s.height/2).toFixed(3)+"px",x=(r?c.left-f:t.offsetLeft)+s.width+48+"px",m=parseFloat((r?c.top-l:t.offsetTop)-c.height/2+s.height/2).toFixed(3)+"px",u=parseFloat((r?c.left-f:t.offsetLeft)-c.width/2+s.width/2).toFixed(3)+"px",y=(r?c.top-l:t.offsetTop)-c.height-48+"px",w=parseFloat((r?c.left-f:t.offsetLeft)-c.width/2+s.width/2).toFixed(3)+"px",L=(r?c.top-l:t.offsetTop)+s.height+48+"px",E={left:h,top:g};-1!==e.indexOf("right")?E={left:x,top:m}:-1!==e.indexOf("top")?E={left:u,top:y}:-1!==e.indexOf("bottom")&&(E={left:w,top:L}),n(d,E)},m=t=>{const e={},s=a(t);if("none"===s.display||"hidden"===s.visibility)return;t.classList.add("speccer-isSpecced");if("static"===a(t.parentElement).position&&(t.parentElement.style.position="relative"),e.style=(t=>{const{marginTop:e,marginBottom:n,marginLeft:i,marginRight:o,paddingTop:a,paddingBottom:s,paddingLeft:d,paddingRight:p}=t;return{marginTop:e,marginBottom:n,marginLeft:i,marginRight:o,paddingTop:a,paddingBottom:s,paddingLeft:d,paddingRight:p}})(s),e.rect=t.getBoundingClientRect(),"0px"!==e.style.marginTop){const a=c(i(e.style.marginTop));a.classList.add("margin"),a.classList.add("marginTop"),n(a,{height:e.style.marginTop,width:e.rect.width+"px",left:o(e.rect.x-t.parentElement.getBoundingClientRect().x)+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y-parseInt(e.style.marginTop,10))+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.marginRight){const a=c(i(e.style.marginRight));a.classList.add("margin"),a.classList.add("marginRight"),n(a,{height:e.rect.height+"px",width:e.style.marginRight,left:o(e.rect.x-t.parentElement.getBoundingClientRect().x+parseInt(e.rect.width,10))+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y)+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.marginBottom){const a=c(i(e.style.marginBottom));a.classList.add("margin"),a.classList.add("marginBottom"),n(a,{height:e.style.marginBottom,width:e.rect.width+"px",left:o(e.rect.x-t.parentElement.getBoundingClientRect().x)+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y+parseInt(e.rect.height,10))+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.marginLeft){const a=c(i(e.style.marginLeft));a.classList.add("margin"),a.classList.add("marginLeft"),n(a,{height:e.rect.height+"px",width:e.style.marginLeft,left:o(e.rect.x-t.parentElement.getBoundingClientRect().x-parseInt(e.style.marginLeft,10))+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y)+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.paddingTop){const a=c(i(e.style.paddingTop));a.classList.add("padding"),a.classList.add("paddingTop"),n(a,{height:e.style.paddingTop,width:e.rect.width+"px",left:o(e.rect.x-t.parentElement.getBoundingClientRect().x)+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y)+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.paddingBottom){const a=c(i(e.style.paddingBottom));a.classList.add("padding"),a.classList.add("paddingBottom"),n(a,{height:e.style.paddingBottom,width:e.rect.width+"px",left:o(e.rect.x-t.parentElement.getBoundingClientRect().x)+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y+(parseInt(e.rect.height,10)-parseInt(e.style.paddingBottom,10)))+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.paddingRight){const a=c(i(e.style.paddingRight));a.classList.add("padding"),a.classList.add("paddingRight"),n(a,{height:e.rect.height+"px",width:e.style.paddingRight,left:o(e.rect.x-t.parentElement.getBoundingClientRect().x+(parseInt(e.rect.width,10)-parseInt(e.style.paddingRight,10)))+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y)+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}if("0px"!==e.style.paddingLeft){const a=c(i(e.style.paddingLeft));a.classList.add("padding"),a.classList.add("paddingLeft"),n(a,{height:e.rect.height+"px",width:e.style.paddingLeft,left:o(e.rect.x-t.parentElement.getBoundingClientRect().x)+"px",top:o(e.rect.y-t.parentElement.getBoundingClientRect().y)+"px"}),p.indexOf(t.nodeName)>=0?t.closest("table").after(a):t.after(a)}},u=()=>{console.info("[@phun-ky/speccer]: Running speccer()"),w(".speccer");document.querySelectorAll("[data-speccer],[data-speccer] *:not(td)").forEach(m);document.querySelectorAll("[data-speccer-measure]").forEach(g);document.querySelectorAll("[data-speccer-typography]").forEach(x)},y=()=>{e("resize","speccer-onResize"),e("resize","anatomy-onResize");const t=()=>{console.info("[@phun-ky/speccer]: Event speccer-onResize triggered"),u()},n=()=>{console.info("[@phun-ky/speccer]: Event anatomy-onResize triggered"),r()};window.removeEventListener("speccer-onResize",t),window.removeEventListener("anatomy-onResize",n),window.addEventListener("speccer-onResize",t),window.addEventListener("anatomy-onResize",n)},w=(t,e=document)=>{[].forEach.call(e.querySelectorAll(t),(function(t){t.parentNode.removeChild(t)}))},L=document.currentScript;if(console.log(L),L&&(-1!==L.getAttribute("src").indexOf("speccer.js")||-1!==L.getAttribute("src").indexOf("JaXpOK.js"))){if(L.hasAttribute("data-manual"))console.info("[@phun-ky/speccer]: Initialized with: data-manual"),window.speccer=u,window.anatomy=r;else if(L.hasAttribute("data-instant"))r(),u();else if(L.hasAttribute("data-dom"))console.info("[@phun-ky/speccer]: Initialized with: data-dom"),"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",r),document.addEventListener("DOMContentLoaded",u)):(r(),u());else if(L.hasAttribute("data-lazy")){console.info("[@phun-ky/speccer]: Initialized with: data-lazy");let t=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.intersectionRatio>0&&(m(t.target),e.unobserve(t.target))}))}));document.querySelectorAll("[data-speccer],[data-speccer] *:not(td)").forEach((e=>{t.observe(e)}));let e=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.intersectionRatio>0&&(g(t.target),e.unobserve(t.target))}))}));document.querySelectorAll("[data-speccer-measure]").forEach((t=>{e.observe(t)}));let n=new IntersectionObserver(((t,e)=>{t.forEach((t=>{const n=t.target.querySelectorAll("[data-anatomy]");t.intersectionRatio>0&&(n.forEach(f),e.unobserve(t.target))}))}));const i=t=>{n.observe(t)};document.querySelectorAll("[data-anatomy-section]").forEach(i)}else console.info("[@phun-ky/speccer]: Initialized with nothing, falling back to data-dom"),"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",r),document.addEventListener("DOMContentLoaded",u)):(r(),u());L.hasAttribute("data-manual")||L.hasAttribute("data-lazy")||y()}t.activateOnResize=y,t.anatomy=r,t.dissectElement=f,t.measureElement=g,t.removeSpeccerElements=w,t.specElement=m,t.specTypographyElement=x,t.speccer=u,Object.defineProperty(t,"__esModule",{value:!0})}));
