!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).speccer={})}(this,(function(t){"use strict";const e=(t,e,i="noop")=>{t&&(!e||e&&0===e.length||e.trim().split(" ").filter((t=>t!==i)).forEach((e=>t.classList.add(e))))},i=(t,e)=>`${t} ${Object.keys(e).filter((t=>e[t])).join(" ")}`.trim(),n=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ"],o=t=>parseInt(t,10),p=t=>o(getComputedStyle(t).getPropertyValue("--ph-speccer-pin-space"))||48,a=()=>new Promise(requestAnimationFrame),l=async(t,e)=>{!t||!e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&0===e.length||0===Object.keys(e).length&&e.constructor===Object||(await a(),Array.isArray(e)?e.forEach((e=>t.style[e.key]=e.value)):Object.keys(e).forEach((i=>t.style[i]=e[i])))},r=async t=>(await a(),getComputedStyle(t,null)),d=(t,e,i)=>t-e.width/2+i.width/2,s=(t,e,i)=>t-e.height/2+i.height/2,c=async t=>{await a();const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},h=(t="",i="span")=>{const n=document.createElement(i),o=document.createTextNode(t+"");return n.appendChild(o),n.setAttribute("title",t+"px"),e(n,"ph speccer spacing"),n},f=async t=>{if(!t)return;const i=await r(t);if("none"===i.display||"0"===i.opacity||"hidden"===i.visibility)return;const n=(t=>{const{marginTop:e,marginBottom:i,marginLeft:n,marginRight:o,paddingTop:p,paddingBottom:a,paddingLeft:l,paddingRight:r}=t;return{marginTop:e,marginBottom:i,marginLeft:n,marginRight:o,paddingTop:p,paddingBottom:a,paddingLeft:l,paddingRight:r}})(i),p=Object.keys(n).filter((t=>"0px"!==n[t]));0!==p.length&&p.forEach((async i=>{const p=o(n[i]),r=h(p),d=(t=>-1!==t.indexOf("Top")?t.replace("Top"," top"):-1!==t.indexOf("Right")?t.replace("Right"," right"):-1!==t.indexOf("Bottom")?t.replace("Bottom"," bottom"):-1!==t.indexOf("Left")?t.replace("Left"," left"):"")(i);e(r,d),document.body.appendChild(r),t.classList.add("is-specced"),await(async(t,e,i,n)=>{await a();const o=n.getBoundingClientRect(),p=await c(n);"marginTop"===t&&l(i,{height:`${e}px`,width:o.width+"px",left:p.left+"px",top:p.top-e+"px"}),"marginRight"===t&&l(i,{height:o.height+"px",width:`${e}px`,left:p.left+parseInt(o.width+"",10)+"px",top:p.top+"px"}),"marginBottom"===t&&l(i,{height:`${e}px`,width:o.width+"px",left:p.left+"px",top:p.top+parseInt(o.height+"",10)+"px"}),"marginLeft"===t&&l(i,{height:o.height+"px",width:`${e}px`,left:p.left-e+"px",top:p.top+"px"}),"paddingTop"===t&&l(i,{height:`${e}px`,width:o.width+"px",left:p.left+"px",top:p.top+"px"}),"paddingBottom"===t&&l(i,{height:`${e}px`,width:o.width+"px",left:p.left+"px",top:p.top+(parseInt(o.height+"",10)-e)+"px"}),"paddingRight"===t&&l(i,{height:o.height+"px",width:`${e}px`,left:p.left+(parseInt(o.width+"",10)-e)+"px",top:p.top+"px"}),"paddingLeft"===t&&l(i,{height:o.height+"px",width:`${e}px`,left:p.left+"px",top:p.top+"px"})})(i,p,r,t)}))};var g,x,u=Object.freeze({__proto__:null,create:h,element:f});!function(t){t.Empty="",t.Left="left",t.Right="right",t.Bottom="bottom",t.Top="top"}(g||(g={})),function(t){t.Outline="outline",t.Enclose="enclose",t.Full="full",t.Left="left",t.Right="right",t.Bottom="bottom",t.Top="top"}(x||(x={}));const m=(t,e=3)=>parseFloat(t+"").toFixed(e),y=(t="",n,o="span")=>{const p=document.createElement(o),a=document.createTextNode(t),l={};null!==n&&""!==n&&(l[n]=!0),-1===n.indexOf(x.Full)&&-1===n.indexOf(x.Enclose)?p.appendChild(a):-1===n.indexOf(x.Full)&&-1===n.indexOf(x.Enclose)||p.setAttribute("data-dissection-counter",t);const r=i("ph speccer dissection",l);return e(p,r),p},w=async(t,e)=>{if(!t)return;const i=t.getAttribute("data-anatomy")||"";if(!i||""===i)return;const o=y(n[e],i);document.body.appendChild(o);const a=await(async(t,e,i)=>{const n=e.getBoundingClientRect(),o=i.getBoundingClientRect(),a=p(i),l=await c(e),r=l.left-o.width-a+"px",h=m(s(l.top,o,n))+"px",f=l.left+n.width+a+"px",g=m(s(l.top,o,n))+"px",u=m(d(l.left,o,n))+"px",y=l.top-o.height-a+"px",w=m(d(l.left,o,n))+"px",O=l.top+n.height+a+"px";let b={};return b=-1!==t.indexOf(x.Outline)?-1!==t.indexOf(x.Left)?-1!==t.indexOf(x.Full)?{left:l.left-8+"px",top:l.top+-1+"px",height:n.height+"px"}:-1!==t.indexOf(x.Enclose)?{left:l.left-1+"px",top:l.top+-1+"px",height:n.height+"px",width:n.width+"px"}:{left:r,top:h}:-1!==t.indexOf(x.Right)?-1!==t.indexOf(x.Full)?{left:l.left+n.width+"px",top:l.top+-1+"px",height:n.height+"px"}:-1!==t.indexOf(x.Enclose)?{left:l.left+-1+"px",top:l.top+-1+"px",height:n.height+"px",width:n.width+"px"}:{left:f,top:g}:-1!==t.indexOf(x.Top)?-1!==t.indexOf(x.Full)?{top:l.top+-8+"px",left:l.left+-1+"px",width:n.width+"px"}:-1!==t.indexOf(x.Enclose)?{top:l.top+-1+"px",left:l.left+-1+"px",height:n.height+"px",width:n.width+"px"}:{left:u,top:y}:-1!==t.indexOf(x.Bottom)?-1!==t.indexOf(x.Full)?{top:l.top+n.height+"px",left:l.left+-1+"px",width:n.width+"px"}:-1!==t.indexOf(x.Enclose)?{top:l.top+-1+"px",left:l.left+-1+"px",height:n.height+"px",width:n.width+"px"}:{left:w,top:O}:-1!==t.indexOf(x.Full)?{left:l.left+n.width+"px",top:l.top+"px",height:n.height+"px"}:-1!==t.indexOf(x.Enclose)?{left:l.left+n.width+"px",top:l.top+-1+"px",height:n.height+"px",width:n.width+"px"}:{left:r,top:h}:-1!==t.indexOf(x.Full)?{left:l.left-8+"px",top:l.top+-1+"px",height:n.height+"px"}:-1!==t.indexOf(x.Enclose)?{left:l.left-1+"px",top:l.top+-1+"px",height:n.height+"px",width:n.width+"px"}:{left:r,top:h},b})(i,t,o);l(o,a)};const O=(t="",i="",n="span")=>{const o=document.createElement(n);return o.setAttribute("title",t+"px"),o.setAttribute("data-measure",parseInt(t+"",10)+"px"),e(o,`ph speccer measure ${i}`),o},b=async t=>{if(!t)return;const e=t.getAttribute("data-speccer-measure");if(""===e||!e)return;const i=await r(t);if("none"===i.display||"0"===i.opacity||"hidden"===i.visibility)return;await a();const n=t.getBoundingClientRect(),o=n.top+window.pageYOffset,p=n.left+window.pageXOffset,d=-1!==(s=e).indexOf("width")?-1!==s.indexOf("top")?"width top":(s.indexOf("bottom"),"width bottom"):-1!==s.indexOf("height")?-1!==s.indexOf("right")?"height right":(s.indexOf("left"),"height left"):"";var s;if(-1!==e.indexOf("width"))if(-1!==e.indexOf("bottom")){const t=O(n.width,d);document.body.appendChild(t),l(t,{left:p+"px",top:o+n.height+1+"px",width:n.width+"px"})}else{const t=O(n.width,d);document.body.appendChild(t);const e=t.getBoundingClientRect();l(t,{left:p+"px",top:o-e.height+1+"px",width:n.width+"px"})}else if(-1!==e.indexOf("height"))if(-1!==e.indexOf("right")){const t=O(n.height,d);document.body.appendChild(t),l(t,{left:p+n.width+"px",top:o+"px",height:n.height+"px"})}else{const t=O(n.height,d);document.body.appendChild(t);const e=t.getBoundingClientRect();l(t,{left:p-e.width+"px",top:o+"px",height:n.height+"px"})}};const E=(t,n)=>{const o=document.createElement("div"),p={};null!==n&&""!==n&&(p[n]=!0);const a=i("ph speccer typography",p);return o.innerHTML=t,e(o,a),o};const A=t=>{const e=()=>function(t,e,i){let n;return function(){const o=this,p=arguments,a=function(){n=null,i||t.apply(o,p)},l=i&&!n;n&&clearTimeout(n),n=setTimeout(a,e),l&&t.apply(o,p)}}((()=>{t()}),300);window.removeEventListener("resize",e),window.addEventListener("resize",e)},S=t=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{t()})):t()},R=u,v=Object.freeze({__proto__:null,create:y,element:w}),B=Object.freeze({__proto__:null,element:b}),C=Object.freeze({__proto__:null,create:E,element:async t=>{if(!t)return;const e=t.getAttribute("data-speccer-typography"),i=await r(t);if("none"===i.display||"0"===i.opacity||"hidden"===i.visibility)return;t.classList.add("is-specced");const n=await(async t=>{const e=(t=>{const{lineHeight:e,letterSpacing:i,fontFamily:n,fontSize:o,fontStyle:p,fontVariationSettings:a,fontWeight:l}=t;return{lineHeight:e,letterSpacing:i,fontFamily:n,fontSize:o,fontStyle:p,fontVariationSettings:a,fontWeight:l}})(await r(t)),i="normal"!==e.lineHeight?parseInt(e.lineHeight,10)/16+"rem":"normal";return`\nfont-styles: {<ul class="speccer-styles">  <li><span class="property">font-family:</span> ${e.fontFamily};</li>  <li><span class="property">font-size:</span> ${e.fontSize} / ${parseInt(e.fontSize,10)/16}rem;</li>  <li><span class="property">font-weight:</span> ${e.fontWeight};</li>  <li><span class="property">font-variation-settings:</span> ${e.fontVariationSettings};</li>  <li><span class="property">line-height:</span> ${e.lineHeight} / ${i};</li>  <li><span class="property">letter-spacing:</span> ${e.letterSpacing};</li>  <li><span class="property">font-style:</span> ${e.fontStyle};</li></ul>}`})(t),o=E(n,e);document.body.appendChild(o);const a=await(async(t,e,i)=>{const n=e.getBoundingClientRect(),o=p(i),a=i.getBoundingClientRect(),l=await c(e),r=l.left-a.width-o+"px",h=m(s(l.top,a,n))+"px",f=l.left+n.width+o+"px",x=m(s(l.top,a,n))+"px",u=m(d(l.left,a,n))+"px",y=l.top-a.height-o+"px",w=m(d(l.left,a,n))+"px",O=l.top+n.height+o+"px";let b={left:r,top:h};return t&&-1!==t.indexOf(g.Right)?b={left:f,top:x}:t&&-1!==t.indexOf(g.Top)?b={left:u,top:y}:t&&-1!==t.indexOf(g.Bottom)&&(b={left:w,top:O}),b})(e,t,o);l(o,a)}}),L=()=>{((t,e=document)=>{[].forEach.call(e.querySelectorAll(t),(function(t){t.remove()}))})(".speccer");const t=document.querySelectorAll("[data-speccer],[data-speccer] *:not(td):not(tr):not(th):not(tfoot):not(thead):not(tbody)"),e=document.querySelectorAll("[data-speccer-measure]"),i=document.querySelectorAll("[data-speccer-typography]"),n=document.querySelectorAll("[data-anatomy-section] [data-anatomy]");t.forEach(R.element),e.forEach(B.element),i.forEach(C.element),n.forEach(v.element)};(t=>{const e=document.currentScript;if(e){const i=e.getAttribute("src");!i||-1===i.indexOf("speccer.js")&&-1===i.indexOf("JaXpOK.js")||(e.hasAttribute("data-manual")?(t=>{window.speccer=t})(t):e.hasAttribute("data-instant")?t():e.hasAttribute("data-dom")?S(t):e.hasAttribute("data-lazy")?(()=>{const t=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.intersectionRatio>0&&(f(t.target),e.unobserve(t.target))}))}));document.querySelectorAll("[data-speccer],[data-speccer] *:not(td)").forEach((e=>{t.observe(e)}));const e=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.intersectionRatio>0&&(b(t.target),e.unobserve(t.target))}))}));document.querySelectorAll("[data-speccer-measure]").forEach((t=>{e.observe(t)}));const i=new IntersectionObserver(((t,e)=>{t.forEach((t=>{const i=t.target.querySelectorAll("[data-anatomy]");t.intersectionRatio>0&&(i.forEach(w),e.unobserve(t.target))}))}));document.querySelectorAll("[data-anatomy-section]").forEach((t=>{i.observe(t)}))})():S(t),e.hasAttribute("data-manual")||e.hasAttribute("data-lazy")||A(t))}})(L),t.default=L,t.dissect=v,t.measure=B,t.spacing=R,t.typography=C,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=speccer.js.map
